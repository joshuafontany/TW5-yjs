title: $:/plugins/commons/yjs/SelectPlugins
caption: Manage Plugins

<$button>
  Save Plugin Selection
  <$action-websocketmessage
    $type='updateTiddlyWikiInfo'
    pluginList={{$:/state/tw5-yjs/ActivePluginList!!list}}
  />
  <$action-websocketmessage
    $type='unloadWiki'
    wikiName={{$:/status/WikiName}}
  />
</$button> <<helpButton "$:/plugins/commons/yjs/AboutSavePluginSelection">>

<a href='javascript:history.go(0)'>Refresh Page</a> <<helpButton "$:/plugins/commons/yjs/AboutRefreshPage">>

<br>
Select Plugin Author: <$select
  tiddler='$:/state/tw5-yjs/SelectedAuthor'
  default='all'
>
  <option
    value='all'
  >
    All
  </option>
  <$list
    filter='[[$:/state/tw5-yjs/AvailablePluginList]indexes[]splitbefore[/]]'
    variable='pluginAuthor'
  >
    <option>
      <<pluginAuthor>>
    </option>
  </$list>
</$select> <<helpButton "$:/plugins/commons/yjs/AboutSelectPluginAuthor">>

Search: <$edit-text
  tiddler='$:/state/tw5-yjs/SearchPlugins'
  default=''
  placeholder='Search Plugins'
  tag='input'
/>

<$list
  filter='[[$:/state/tw5-yjs/SelectedAuthor]has[text]!text[all]]'
  variable='unused'
>
  <$set
    name=pluginAuthor
    value={{$:/state/tw5-yjs/SelectedAuthor}}
  >
    <h2><$text text=<<pluginAuthor>>></$text></h2>
    <$list
      filter='[[$:/state/tw5-yjs/AvailablePluginList]indexes[]search{$:/state/tw5-yjs/SearchPlugins}prefix<pluginAuthor>]'
    >
      <$list
        filter='[list[$:/state/tw5-yjs/ActivePluginList]match<currentTiddler>]'
        emptyMessage="""
        <$button
          class='tc-btn-invisible'
        >
          <input
            type='checkbox'
          />
          <b>
            <$view
              field='title'
            />
          </b>
          <$action-listops
            $tiddler='$:/state/tw5-yjs/ActivePluginList'
            $subfilter='+[append<currentTiddler>]'
          />
        </$button>
        :
        <$view tiddler='$:/state/tw5-yjs/AvailablePluginList' index=<<currentTiddler>>/>
        <br>"""
      >
        <$button
          class='tc-btn-invisible'
        >
          <input
            type='checkbox'
            checked
          />
          <b>
            <$view
              field='title'
            />
          </b>
          <$action-listops
            $tiddler='$:/state/tw5-yjs/ActivePluginList'
            $subfilter='+[remove<currentTiddler>]'
          />
        </$button>
        :
        <$view tiddler='$:/state/tw5-yjs/AvailablePluginList' index=<<currentTiddler>>/>
        <br>
      </$list>
    </$list>
  </$set>
</$list>

<$list
  filter='[[$:/state/tw5-yjs/SelectedAuthor]text[all]][[$:/state/tw5-yjs/SelectedAuthor]!has[text]] +[limit[1]]'
  variable='unused'
>
  <$list
    filter='[[$:/state/tw5-yjs/AvailablePluginList]indexes[]splitbefore[/]]'
    variable='pluginAuthor'
  >
    <h2><$text text=<<pluginAuthor>>></$text></h2>
    <$list
      filter='[[$:/state/tw5-yjs/AvailablePluginList]indexes[]prefix<pluginAuthor>search{$:/state/tw5-yjs/SearchPlugins}]'
    >
      <$list
        filter='[list[$:/state/tw5-yjs/ActivePluginList]match<currentTiddler>]'
        emptyMessage="""
        <$button
          class='tc-btn-invisible'
        >
          <input
            type='checkbox'
          />
          <b>
            <$view
              field='title'
            />
          </b>
          <$action-listops
            $tiddler='$:/state/tw5-yjs/ActivePluginList'
            $subfilter='+[append<currentTiddler>]'
          />
        </$button>
        :
        <$view tiddler='$:/state/tw5-yjs/AvailablePluginList' index=<<currentTiddler>>/>
        <br>"""
      >
        <$button
          class='tc-btn-invisible'
        >
          <input
            type='checkbox'
            checked
          />
          <b>
            <$view
              field='title'
            />
          </b>
          <$action-listops
            $tiddler='$:/state/tw5-yjs/ActivePluginList'
            $subfilter='+[remove<currentTiddler>]'
          />
        </$button>
        :
        <$view tiddler='$:/state/tw5-yjs/AvailablePluginList' index=<<currentTiddler>>/>
        <br>
      </$list>
    </$list>
  </$list>
</$list>